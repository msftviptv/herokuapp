<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø¯ÙˆÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        body { background:#e0e0e0; font-family:'Changa', sans-serif; margin:0; padding:10px; }
        .alba_sports_events-event_item { text-align: center; width: 100%; display: block; overflow: hidden; margin: 0 auto 15px; max-width: 800px; position: relative; }
        .event_inner { display: flex; align-items: center; justify-content: space-between; background: #736f6f; height: 52px; padding: 0 10px; position: relative; }
        .team-aria { flex: 1; background: #000; color: #fff; height: 40px; display: flex; align-items: center; justify-content: center; border-top: 3px solid #fff; position: relative; }
        .team-first { transform: skew(-45deg); border-left: 4px solid #fff; }
        .team-second { transform: skew(45deg); border-right: 4px solid #fff; }
        .team-aria span { transform: skew(var(--skew-fix)); font-weight: bold; font-size: 14px; }
        .team-first span { --skew-fix: 45deg; }
        .team-second span { --skew-fix: -45deg; }
        .width { width: 150px; color: #fff; font-size: 24px; font-weight: bold; background: #444; height: 100%; display: flex; align-items: center; justify-content: center; z-index: 2; }
        .alba-team_logo { width: 60px; height: 60px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: absolute; top: -10px; border: 2px solid #122c48; z-index: 5; }
        .team-first .alba-team_logo { right: -25px; transform: skew(45deg); }
        .team-second .alba-team_logo { left: -25px; transform: skew(-45deg); }
        .alba-team_logo img { max-height: 40px; width: auto; }
        .league-title { background: #ddd; padding: 2px 15px; display: inline-block; border-radius: 12px 12px 0 0; font-size: 13px; border-top: 2px solid #383838; }
        .events-info-aria { background: #ddd; padding: 5px; border-radius: 0 0 20px 20px; display: flex; justify-content: space-around; font-size: 12.5px; color: #000; }
        .loading { text-align: center; padding: 50px; font-size: 18px; color: #666; }
        .non-mauch { text-align: center; padding: 40px; background: #fff; color: #999; border-radius: 10px; }
        a { text-decoration: none; color: inherit; }
        @media (max-width: 600px) {
            .width { width: 100px; font-size: 18px; }
            .team-aria span { font-size: 11px; }
        }
    </style>
</head>
<body>

<div id="matches-today">
    <div class="loading">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…...</div>
</div>

<script>
async function loadMatches() {
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… Ø¨ØªÙ†Ø³ÙŠÙ‚ YYYY/MM/DD
    const today = new Date();
    const dateStr = today.getFullYear() + '/' + 
                    String(today.getMonth() + 1).padStart(2, '0') + '/' + 
                    String(today.getDate()).padStart(2, '0');

    const apiUrl = `https://www.filgoal.com/matches/ajaxlist?date=${dateStr}`;

    try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();

        const container = document.getElementById('matches-today');
        container.innerHTML = ''; // Ù…Ø³Ø­ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„

        if (!data || data.length === 0) {
            container.innerHTML = '<div class="non-mauch">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù…Ø¬Ø¯ÙˆÙ„Ø© Ù„Ù„ÙŠÙˆÙ…</div>';
            return;
        }

        data.forEach(match => {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
            const timestamp = parseInt(match.Date.replace(/\/Date\((\d+)\)\//, '$1'));
            const matchTime = new Date(timestamp);
            const timeStr = matchTime.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit', hour12: true });

            // ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØºØ·ÙŠØ© (Ø§Ù„Ù‚Ù†Ø§Ø© ÙˆØ§Ù„Ù…Ø¹Ù„Ù‚)
            const tv = (match.TvCoverage && match.TvCoverage.length > 0) ? match.TvCoverage[0] : { TvChannelName: "ØºÙŠØ± Ù…ØªÙˆÙØ±", CommenterName: "ØºÙŠØ± Ù…ØªÙˆÙØ±", TvChannelId: "0" };

            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            const matchCard = `
                <div class="alba_sports_events-event_item">
                    <a href="https://egygenio.page.link/${tv.TvChannelId}">
                        <div class="new-league-head">
                            <h6 class="league-title">${match.ChampionshipName}</h6>
                        </div>
                        <div class="event_inner">
                            <div class="team-aria team-first">
                                <div class="alba-team_logo"><img src="https:${match.HomeTeamLogoUrl}" alt=""></div>
                                <span>${match.HomeTeamName}</span>
                            </div>
                            <div class="width">${match.HomeScore !== null ? match.HomeScore + ' - ' + match.AwayScore : timeStr}</div>
                            <div class="team-aria team-second">
                                <span>${match.AwayTeamName}</span>
                                <div class="alba-team_logo"><img src="https:${match.AwayTeamLogoUrl}" alt=""></div>
                            </div>
                        </div>
                        <div class="events-info-aria">
                            <span>ğŸ™ï¸ ${tv.CommenterName}</span>
                            <span>ğŸ•’ ${match.MatchStatusName}</span>
                            <span>ğŸ“º ${tv.TvChannelName}</span>
                        </div>
                    </a>
                </div>
            `;
            container.innerHTML += matchCard;
        });

    } catch (error) {
        console.error('Fetch error:', error);
        document.getElementById('matches-today').innerHTML = '<div class="non-mauch">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù€ CORS.</div>';
    }
}

// ØªÙ†ÙÙŠØ° Ø§Ù„Ø¯Ø§Ù„Ø© ÙÙˆØ± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.onload = loadMatches;
</script>

</body>
</html>
