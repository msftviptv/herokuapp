<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Ø³Ø£Ø¶Ø¹ Ù‡Ù†Ø§ Ù…Ù„Ø®Øµ Ø§Ù„Ø³ØªØ§ÙŠÙ† Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡ Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„Ø´ÙƒÙ„ */
        body { background:#e0e0e0; font-family:'Changa', sans-serif; margin:0; padding:10px; }
        .alba_sports_events-event_item { text-align: center; width: 100%; display: block; overflow: hidden; margin: 0 auto 15px; position: relative; max-width: 800px;}
        .event_inner { display: flex; align-items: center; justify-content: space-between; background: #736f6f; height: 60px; padding: 0 10px; position: relative; }
        .team-aria { flex: 1; background: #000; color: #fff; height: 45px; display: flex; align-items: center; justify-content: center; position: relative; border: 2px solid #fff;}
        .width { width: 120px; color: #fff; font-size: 24px; font-weight: bold; background: #444; height: 100%; display: flex; align-items: center; justify-content: center;}
        .alba-team_logo { width: 50px; height: 50px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 10px; }
        .alba-team_logo img { max-height: 40px; }
        .league-title { background: #ddd; padding: 5px 15px; display: inline-block; border-radius: 10px 10px 0 0; font-size: 12px; margin-bottom: -2px; }
        .events-info-aria { background: #ddd; padding: 5px; border-radius: 0 0 15px 15px; display: flex; justify-content: space-around; font-size: 12px; }
        .loading { text-align: center; padding: 50px; font-size: 20px; }
        a { text-decoration: none; color: inherit; }
    </style>
</head>
<body>

<div id="matches-container">
    <div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª...</div>
</div>

<script>
async function fetchMatches() {
    // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø°ÙŠ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù…Ù‡ ÙÙŠ PHP
    const targetUrl = "https://www.filgoal.com/matches/ajaxlist?date=" + new Date().toISOString().split('T')[0];
    
    // Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù„ØªØ®Ø·ÙŠ Ø­Ù…Ø§ÙŠØ© CORS
    const proxy = "https://blue-paper-3226.03ab59a70f.workers.dev/?url=";

    try {
        const response = await fetch(proxy + encodeURIComponent(targetUrl));
        const data = await response.json();
        
        const container = document.getElementById('matches-container');
        container.innerHTML = ''; // Ù…Ø³Ø­ ÙƒÙ„Ù…Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"

        if (data.length === 0) {
            container.innerHTML = '<div class="non-mauch">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</div>';
            return;
        }

        data.forEach(match => {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙˆÙ‚Øª (ØªØ­ÙˆÙŠÙ„ Ù…Ù† ØµÙŠØºØ© /Date(timestamp)/)
            const timestamp = parseInt(match.Date.replace(/\/Date\((\0-9]+)\)\//, '$1'));
            const matchDate = new Date(timestamp);
            const timeString = matchDate.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit', hour12: true });

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© (Ù‡Ù„ Ø¨Ø¯Ø£Øª Ø£Ù… Ù„Ø§)
            const now = new Date();
            const isStarted = now > matchDate;
            const scoreOrTime = isStarted ? `${match.HomeScore} - ${match.AwayScore}` : timeString;

            // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© ÙˆØ§Ù„Ù…Ø¹Ù„Ù‚ (Ø£ÙˆÙ„ Ø¹Ù†ØµØ± ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ©)
            const coverage = match.TvCoverage && match.TvCoverage.length > 0 ? match.TvCoverage[0] : { TvChannelName: "ØºÙŠØ± Ù…Ø¯Ø±Ø¬", CommenterName: "ØºÙŠØ± Ù…Ø¯Ø±Ø¬", TvChannelId: "0" };

            // Ø¨Ù†Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
            const matchHTML = `
                <div class="alba_sports_events-event_item">
                    <a href="https://egygenio.page.link/${coverage.TvChannelId}">
                        <div class="new-league-head">
                            <h6 class="league-title">${match.ChampionshipName}</h6>
                        </div>
                        <div class="event_inner">
                            <div class="team-aria">
                                <div class="alba-team_logo"><img src="https:${match.HomeTeamLogoUrl}" /></div>
                                <span>${match.HomeTeamName}</span>
                            </div>
                            <div class="width">${scoreOrTime}</div>
                            <div class="team-aria">
                                <span>${match.AwayTeamName}</span>
                                <div class="alba-team_logo"><img src="https:${match.AwayTeamLogoUrl}" /></div>
                            </div>
                        </div>
                        <div class="events-info-aria">
                            <span>ğŸ¤ ${coverage.CommenterName}</span>
                            <span>â° ${match.MatchStatusName || 'Ù„Ù… ØªØ¨Ø¯Ø£'}</span>
                            <span>ğŸ“º ${coverage.TvChannelName}</span>
                        </div>
                    </a>
                </div>
            `;
            container.innerHTML += matchHTML;
        });

    } catch (error) {
        console.error("Error fetching matches:", error);
        document.getElementById('matches-container').innerHTML = '<div class="non-mauch">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>';
    }
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.onload = fetchMatches;
</script>

</body>
</html>
